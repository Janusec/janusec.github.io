<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">    
    <title>Appendix 7: GSLB</title>
    <meta name="keywords" content="[Janusec Application Gateway, GSLB]">
    <meta name="description" content="Implementing Global Server Load Balance through Janusec Application Gateway">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="stylesheet" type="text/css" href="/bootstrap-4.1.1/css/bootstrap.min.css">   
</head>
<body>

  <header>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">        
        <a href="/" class="navbar-brand">JANUSEC</a>
        
        <ul class="navbar-nav">
          
          <li class="nav-item">
            <a class=" nav-link" href="/dl/">
                  Download
            </a>
          </li>            
          
          <li class="nav-item">
            <a class=" nav-link" href="https://github.com/Janusec/janusec">
                  Github
            </a>
          </li>            
          
          <li class="nav-item">
            <a class=" nav-link" href="/documentation/quick-start/">
                  Documentation
            </a>
          </li>            
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
              Language
            </a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="/">English</a>
              <a class="dropdown-item" href="/cn/">中文</a>
            </div>
          </li>
        </ul>
    </nav>
</header>
  <div class="container-fluid">
  <div class="row">    
      <div class="col-sm-3">        
        <ul class="list-group">
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/quick-start/">Quick Start</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/introduction/">Introduction</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/installation/">Installation</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/configuration/">Configuration File</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/admin/">Administration</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/certificate-management/">Certificate Management</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/application-management/">Application Management</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/node-management/">Node Management</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/waf-management/">WAF Management</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/operation-management/">Operation Management</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/oauth2/">OAuth2 Authentication</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/migrate-to-janusec/">Migrate to Janusec</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/update-janusec/">Update Janusec</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/pricing/">Pricing</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/faq/">FAQ</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/user-agreement/">User Agreement</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/diagnose/">Diagnose</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/appendix-re2/">Appendix 1: RE2 Regex</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/appendix-psql/">Appendix 2: PostgreSQL Operations</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/appendix-ha/">Appendix 3: High Availability Configuration</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/appendix-docker/">Appendix 4: Docker Deployment</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/appendix-data-discovery/">Appendix 5: Data Discovery</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/appendix-cookie/">Appendix 6: Cookie Compliance</a>
            </li>
          
            <li class="list__post list-group-item">
              <span></span>
              <a href="/documentation/appendix-gslb/">Appendix 7: GSLB</a>
            </li>
          
        </ul>
      </div>
      <div class="col-sm-9">
            <article>
            <h1 id="gslb-global-server-load-balance">GSLB (Global Server Load Balance)</h1>
<hr>
<h2 id="1-gslb-introduction">1 GSLB Introduction</h2>
<p>GSLB (Global Server Load Balance) can automatically schedule traffic through custom DNS servers based on the user&rsquo;s IP address.</p>
<p>The professional plus edition of Janussec Application Gateway has built-in DNS server and GSLB scheduling function on the primary node, while the open source edition does not include this feature.</p>
<h2 id="2-enable-gslb">2 Enable GSLB</h2>
<p>Refer to the following steps to enable GSLB (Global Server Load Balance) if you have multiple gateway nodes deployed.</p>
<p>Assuming you have an application that provides services to internet users through: <code>https://demo.example.com</code>, and the customized domain name server is <code>ns01.example.com</code> (use the DNS server provided by the primary node of Janusec Application Gateway):</p>
<ol>
<li>Step 1: Enable firewall policy, example for Debian 11: #<code>ufw allow 53</code></li>
<li>Step 2: Make sure port 53 is not occupied by other applications, typically in Debian 11 it was occupied, stop it: #<code>systemctl stop systemd-resolved</code> and #<code>systemctl disable systemd-resolved</code>, then check with: #<code>netstat -antulp | grep :53</code></li>
<li>Step 3: Enable DNS Server in Settings - Advanced, and then restart service: #<code>systemctl restart janusec</code></li>
<li>Step 4: Add an <code>A</code> or CNAME record <code>ns01</code> with value ip address points to this gateway, and a <code>NS</code> record <code>demo</code> with value <code>ns01.example.com.</code> at the authoritative name server, not on this gateway. Individual domain name holders should modify it at the domain name registrar.</li>
<li>Step 5: Add an <code>A</code> record <code>demo</code> on the gateway, and enable <code>Resolve to an available gateway node for load balance automatically</code></li>
<li>Step 6 (Important): Add <code>DNS Hostnames</code> (aka. <code>Glue Records</code>) for your DNS server at the domain name registrar, if not, your own dns server will not accepted by other DNS servers. This record takes approximately 24 to 48 hours to take effect.</li>
<li>Step 7: Configure application in Application and make sure the backend source servers are available to all nodes of Janusec Application Gateway.</li>
<li>Step 8: Open with web browser, or under command shell: <code>nslookup demo.example.com</code>, or <code>dig demo.example.com A</code></li>
</ol>

            </article>
      </div>
  </div>
</div>
  <div class="container-fluid rowblock">
    
        &copy;<a href="https://www.janusec.com/">JANUSEC</a> All Rights Reserved. &nbsp;&nbsp;&nbsp;&nbsp;
        Contact: support<b>#</b>janusec<b>.</b>com  &nbsp;&nbsp;
        QQ Group: 776900157
    
</div>



<script src="/js/jquery-3.3.1.min.js"></script>
<script src="/bootstrap-4.1.1/js/bootstrap.min.js"></script>
</body>
</html>